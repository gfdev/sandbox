webpackJsonp([1],{0:function(e,t,n){e.exports=n(342)},203:function(e,t){"use strict";function n(e,t){r.addType(e,function(n,l,i){var s,o,c,u,m=l,p=(new Date).getTime();if(!n){m={},u=[],c=0;try{for(n=t.length;n=t.key(c++);)a.test(n)&&(o=JSON.parse(t.getItem(n)),o.expires&&o.expires<=p?u.push(n):m[n.replace(a,"")]=o.data);for(;n=u.pop();)t.removeItem(n)}catch(d){}return m}if(n="__amplify__"+n,void 0===l){if(s=t.getItem(n),o=s?JSON.parse(s):{expires:-1},!(o.expires&&o.expires<=p))return o.data;t.removeItem(n)}else if(null===l)t.removeItem(n);else{o=JSON.stringify({data:l,expires:i.expires?p+i.expires:null});try{t.setItem(n,o)}catch(d){r[e]();try{t.setItem(n,o)}catch(d){throw r.error()}}}return m})}/*!
	 * Amplify Store - Persistent Client-Side Storage 1.1.2
	 *
	 * Copyright 2011 - 2013 appendTo LLC. (http://appendto.com/team)
	 * Dual licensed under the MIT or GPL licenses.
	 * http://appendto.com/open-source-licenses
	 *
	 * http://amplifyjs.com
	 */
var r=function(e,t,n){var a=r.type;return n&&n.type&&n.type in r.types&&(a=n.type),r.types[a](e,t,n||{})};r.types={},r.type=null,r.addType=function(e,t){r.type||(r.type=e),r.types[e]=t,r[e]=function(t,n,a){return a=a||{},a.type=e,r(t,n,a)}},r.error=function(){return"amplify.store quota exceeded"};var a=/^__amplify__/;for(var l in{localStorage:1,sessionStorage:1})try{"undefined"!=typeof window&&(window[l].setItem("__amplify__","x"),window[l].removeItem("__amplify__"),n(l,window[l]))}catch(i){}if("undefined"!=typeof window&&!r.types.localStorage&&window.globalStorage)try{n("globalStorage",window.globalStorage[window.location.hostname]),"sessionStorage"===r.type&&(r.type="globalStorage")}catch(i){}!function(){if(!r.types.localStorage&&"undefined"!=typeof window){var e=document.createElement("div"),t="amplify";e.style.display="none",document.getElementsByTagName("head")[0].appendChild(e);try{e.addBehavior("#default#userdata"),e.load(t)}catch(n){return void e.parentNode.removeChild(e)}r.addType("userData",function(n,a,l){e.load(t);var i,s,o,c,u,m=a,p=(new Date).getTime();if(!n){for(m={},u=[],c=0;i=e.XMLDocument.documentElement.attributes[c++];)s=JSON.parse(i.value),s.expires&&s.expires<=p?u.push(i.name):m[i.name]=s.data;for(;n=u.pop();)e.removeAttribute(n);return e.save(t),m}if(n=n.replace(/[^\-._0-9A-Za-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c-\u200d\u203f\u2040\u2070-\u218f]/g,"-"),n=n.replace(/^-/,"_-"),void 0===a){if(i=e.getAttribute(n),s=i?JSON.parse(i):{expires:-1},!(s.expires&&s.expires<=p))return s.data;e.removeAttribute(n)}else null===a?e.removeAttribute(n):(o=e.getAttribute(n),s=JSON.stringify({data:a,expires:l.expires?p+l.expires:null}),e.setAttribute(n,s));try{e.save(t)}catch(d){null===o?e.removeAttribute(n):e.setAttribute(n,o),r.userData();try{e.setAttribute(n,s),e.save(t)}catch(d){throw null===o?e.removeAttribute(n):e.setAttribute(n,o),r.error()}}return m})}}(),function(){function e(e){return void 0===e?void 0:JSON.parse(JSON.stringify(e))}var t={},n={};r.addType("memory",function(r,a,l){return r?void 0===a?e(t[r]):(n[r]&&(clearTimeout(n[r]),delete n[r]),null===a?(delete t[r],null):(t[r]=a,l.expires&&(n[r]=setTimeout(function(){delete t[r],delete n[r]},l.expires)),a)):e(t)})}(),e.exports=r},238:237,292:function(e,t,n){e.exports=n(364)},342:function(e,t,n){(function(e,t){try{(function(){"use strict";var r=n(343);e.render(t.createElement(r,null),document.getElementById("body"))}).call(this)}finally{}}).call(t,n(15),n(1))},343:function(e,t,n){(function(t){try{(function(){"use strict";function r(){var e=new Date;return 60*e.getHours()+e.getMinutes()}function a(e){return e.match(/((?:00)?\d{3})/g).join(" ")}function l(e){var t=parseInt(e/60),n=parseInt(e%60);return[t>9?t:"0"+t,n>9?n:"0"+n].join(":")}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){var n=[],r=!0,a=!1,l=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(o){a=!0,l=o}finally{try{!r&&s["return"]&&s["return"]()}finally{if(a)throw l}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();n(238);var o=n(203),c=n(292),u=n(163),m=u.Grid,p=u.Row,d=u.Col,h=u.Panel,f=u.Button,y=u.Input,v=u.Table,E=u.Glyphicon,x=t.createClass({displayName:"CallsNext",propTypes:{calls:t.PropTypes.instanceOf(Immutable.List).isRequired,now:t.PropTypes.number.isRequired},shouldComponentUpdate:function(e,t){return!Immutable.is(e.calls,this.props.calls)},render:function(){var e=this,n=this.props.calls.filter(function(t){return t.get("time")>=e.props.now}),r=null;return n.size&&(r=n.sortBy(function(e){return e.get("time")}).first()),t.createElement(p,{style:{width:"95%"}},t.createElement(h,null,t.createElement("h2",{className:"center",style:{marginTop:0}},"Next call"),t.createElement(y,null,t.createElement(p,null,t.createElement(d,{xs:6},t.createElement("input",{type:"text",className:"form-control",value:r&&r.get("name"),disabled:!0})),t.createElement(d,{xs:4},t.createElement("input",{type:"text",className:"form-control",value:r&&a(r.get("phone")),disabled:!0})),t.createElement(d,{xs:2},t.createElement("input",{type:"text",className:"form-control",value:r&&l(r.get("time")),disabled:!0}))))))}}),g=t.createClass({displayName:"CallsAdd",mixins:[c],getInitialState:function(){return{name:"",phone:"",time:""}},handleClickAdd:function(){return/^[a-z.\-'\s]{1,30}$/i.test(this.state.name)?this._checkPhone()?this._checkTime()?(this.props.handleCallAdd(this.state),void this.setState(this.getInitialState())):void alert("Time is incorrect!"):void alert("Phone is incorrect!"):void alert("Name is incorrect!")},_checkTime:function(){if(!/^\d{2}:\d{2}$/.test(this.state.time))return!1;var e=this.state.time.split(":"),t=s(e,2),n=t[0],r=t[1];return 0>+n||+n>23||0>+r||+r>59?!1:!0},_checkPhone:function(){if(!/^(?:\+|00)[0-9()-\s]+$/.test(this.state.phone))return!1;for(var e=!0,t=["(",")","-"],n=0;n<t.length;n++){var r=t[n],a=new RegExp("\\"+r,"g");(this.state.phone.match(a)||[]).length>1&&(e=!1);var l=this.state.phone.indexOf(r);-1!==l&&(1>l||l>7)&&(e=!1)}return e},render:function(){return t.createElement(p,{style:{width:"95%"}},t.createElement(h,{header:"Add call"},t.createElement(p,{style:{marginBottom:"10px"}},t.createElement(y,null,t.createElement(d,{xs:6},t.createElement("input",{type:"text",className:"form-control",valueLink:this.linkState("name")})),t.createElement(d,{xs:4},t.createElement("input",{type:"text",className:"form-control",valueLink:this.linkState("phone")})),t.createElement(d,{xs:2},t.createElement("input",{type:"text",className:"form-control",placeholder:"mm:ss",valueLink:this.linkState("time")})))),t.createElement(p,null,t.createElement(d,{xs:10}),t.createElement(d,{xs:2},t.createElement(f,{bsStyle:"primary",onClick:this.handleClickAdd,block:!0},"Add ",t.createElement(E,{glyph:"plus"}))))))}}),b=t.createClass({displayName:"CallsList",propTypes:{calls:t.PropTypes.instanceOf(Immutable.List).isRequired,now:t.PropTypes.number.isRequired},getInitialState:function(){return{visibility:"all",sort:"time",asc:!0}},render:function(){var e=this,n=this.props.calls.filter(function(t){return"next"===e.state.visibility?t.get("time")>e.props.now:"finished"===e.state.visibility?t.get("time")<=e.props.now:!0}).sortBy(function(t){return t.get(e.state.sort)});return this.state.asc||(n=n.reverse()),t.createElement(p,{style:{width:"95%"}},t.createElement(p,null,t.createElement(v,{striped:!0,bordered:!0,hover:!0,responsive:!0},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,t.createElement("a",{href:"#",onClick:function(t){t.preventDefault(),e.setState({sort:"name",asc:!e.state.asc})}},t.createElement(p,null,t.createElement(d,{xs:6},"Name"),t.createElement(d,{xs:6,style:{textAlign:"right"}},"name"===this.state.sort&&t.createElement(E,{glyph:this.state.asc?"triangle-bottom":"triangle-top"}))))),t.createElement("th",null,"Phone number"),t.createElement("th",null,t.createElement("a",{href:"#",onClick:function(t){t.preventDefault(),e.setState({sort:"time",asc:!e.state.asc})}},t.createElement(p,null,t.createElement(d,{xs:6},"Time"),t.createElement(d,{xs:6,style:{textAlign:"right"}},"time"===this.state.sort&&t.createElement(E,{glyph:this.state.asc?"triangle-bottom":"triangle-top"}))))),t.createElement("th",null),t.createElement("th",null))),t.createElement("tbody",null,n.map(function(n){var r=n.hashCode();return t.createElement("tr",{key:r},t.createElement("td",null,n.get("name")),t.createElement("td",null,a(n.get("phone"))),t.createElement("td",null,l(n.get("time"))),t.createElement("td",{className:"center"},t.createElement("a",{href:"#",onClick:e.props.handleCallRemove.bind(null,r)},"delete")),t.createElement("td",{className:"center"},t.createElement("input",{type:"checkbox",disabled:!0,checked:n.get("time")<e.props.now})))})))),t.createElement(p,null,t.createElement(d,{xs:4},t.createElement(f,{bsStyle:"primary",onClick:function(){e.setState({visibility:"all"})},disabled:"all"===this.state.visibility,block:!0},"All")),t.createElement(d,{xs:4},t.createElement(f,{bsStyle:"primary",onClick:function(){e.setState({visibility:"next"})},disabled:"next"===this.state.visibility,block:!0},"Next")),t.createElement(d,{xs:4},t.createElement(f,{bsStyle:"primary",onClick:function(){e.setState({visibility:"finished"})},disabled:"finished"===this.state.visibility,block:!0},"Finished"))))}}),S=t.createClass({displayName:"App",getInitialState:function(){var e=o("calls");return e?{calls:Immutable.fromJS(o("calls")||{}),now:r()}:{calls:Immutable.List(),now:r()}},componentWillUpdate:function(e,t){o("calls",t.calls.toJS())},handleCallRemove:function(e,t){t.preventDefault();var n=this.state.calls.findIndex(function(t){return t.hashCode()==e});this.setState({calls:this.state.calls.remove(n),now:r()})},handleCallAdd:function(e){var t=e.time.split(":"),n=s(t,2),a=n[0],l=n[1],i=e.phone.replace(/^\+/,"00").replace(/\D/g,""),o=Immutable.Map({name:e.name,phone:i,time:60*+a+ +l});if(0===this.state.calls.size)this.setState({calls:this.state.calls.push(o),now:r()});else{var c=this.state.calls.findIndex(function(e){return e.hashCode()==o.hashCode()});-1===c&&this.setState({calls:this.state.calls.push(o),now:r()})}},render:function(){return t.createElement(m,{fluid:!0},t.createElement(p,null,t.createElement(d,{xs:6},t.createElement(x,this.state)),t.createElement(d,{xs:6},t.createElement(g,{handleCallAdd:this.handleCallAdd}),t.createElement(b,i({},this.state,{handleCallRemove:this.handleCallRemove})))))}});e.exports=S}).call(this)}finally{}}).call(t,n(1))},364:function(e,t,n){"use strict";var r=n(382),a=n(390),l={linkState:function(e){return new r(this.state[e],a.createStateKeySetter(this,e))}};e.exports=l},382:function(e,t,n){"use strict";function r(e,t){this.value=e,this.requestChange=t}function a(e){var t={value:"undefined"==typeof e?l.PropTypes.any.isRequired:e.isRequired,requestChange:l.PropTypes.func.isRequired};return l.PropTypes.shape(t)}var l=n(176);r.PropTypes={link:a},e.exports=r},390:function(e,t){"use strict";function n(e,t){var n={};return function(r){n[t]=r,e.setState(n)}}var r={createStateSetter:function(e,t){return function(n,r,a,l,i,s){var o=t.call(e,n,r,a,l,i,s);o&&e.setState(o)}},createStateKeySetter:function(e,t){var r=e.__keySetters||(e.__keySetters={});return r[t]||(r[t]=n(e,t))}};r.Mixin={createStateSetter:function(e){return r.createStateSetter(this,e)},createStateKeySetter:function(e){return r.createStateKeySetter(this,e)}},e.exports=r}});